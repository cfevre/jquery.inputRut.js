(function(e){"use strict";var t="inputRut";var n=["input"];e[t]=function(t,n){var r={dvSeparator:"-",thousandsSeparator:".",showPlaceHolder:true,placeHolderText:"Ej: 1.234.567-8",errorClass:"invalid",maxLength:12,addMaxLength:true,isRequired:true,keepFocusOnError:false,onBlur:function(){},onFocus:function(){},onInvalid:function(){},onValid:function(){}};var i=this;i.settings={};var s=e(t);var o=function(e){var t=e.trim().replace(/\./gi,"").replace(/\-/gi,"").toUpperCase();while(t.length>0&&t[0]==="0"){t=t.substring(1)}return t};var u=function(){s.val(o(s.val()))};var a=function(e){var t=e.length;if(t<2){return""}e=e.substring(0,t-1);var n=0;var r=2;for(var i=e.length-1;i>=0;i--){n=n+e.charAt(i)*r;r=r==7?2:r+1}var s=n%11;if(s===1){return"K"}if(s===0){return"0"}return""+(11-s)};var f=function(){var e=s.val().toUpperCase();if(e.length<2){return}var t=e.substring(0,e.length-1);var n="";while(t.length>2){n=t.substring(t.length-3)+n;t=t.substring(0,t.length-3);n=t.length>0?i.settings.thousandsSeparator+n:n}n=t+n;e=n+i.settings.dvSeparator+e.substr(e.length-1);s.val(e)};var l=function(){if(i.isValid()){u()}setTimeout(function(){s.select();i.settings.onFocus()},50)};var c=function(){if(!i.isValid()){s.addClass(i.settings.errorClass);i.settings.onInvalid(s);i.settings.onBlur(s);if(i.settings.keepFocusOnError){s.focus()}return}u();s.removeClass(i.settings.errorClass);f();i.settings.onValid(s);i.settings.onBlur(s)};i.init=function(){i.settings=e.extend({},r,n);s.focus(function(){l()});s.blur(function(){c()});if(i.settings.addMaxLength){s.attr("maxlength",i.settings.maxLength)}if(i.settings.showPlaceHolder){s.attr("placeholder",i.settings.placeHolderText)}};i.isValid=function(){var e=o(s.val());if(e.length===0&&!i.settings.isRequired){return true}return e.length>1?a(e)===e.substring(e.length-1):false};i.init()};e.fn[t]=function(r){return this.each(function(){var i=e(this);if(undefined===i.data(t)&&(n.length===0||n.indexOf(i.prop("tagName").toLowerCase())>=0)){var s=new e[t](this,r);i.data(t,s)}})}})(jQuery)
